<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/estilos.css">
    <title>Registrar Usuario - Sistema de Carros</title>
</head>
<body class="login-body">
    <!-- ===== CONTENEDOR PRINCIPAL DEL REGISTRO ===== -->
    <div class="login-container">
        <h1>üöó Sistema de Carros</h1>
        <h2>Registrar Nuevo Usuario</h2>
        
        <!-- ===== MANEJO DE MENSAJES ===== -->
        <!-- Si hay un error (usuario existente, contrase√±as no coinciden, etc.) -->
        <% if (error) { %>
            <div class="error-message">
                <!-- Mensaje de error enviado desde el servidor -->
                <%= error %>
            </div>
        <% } %>
        
        <!-- Si el registro fue exitoso -->
        <% if (success) { %>
            <div class="success-message">
                <!-- Mensaje de √©xito enviado desde el servidor -->
                <%= success %>
            </div>
        <% } %>
        
        <!-- ===== FORMULARIO DE REGISTRO ===== -->
        <!-- Formulario que env√≠a los datos a la ruta /register por m√©todo POST -->
        <form action="/register" method="post">
            <div class="form-group">
                <label for="username">Usuario:</label>
                <!-- Campo para el nombre de usuario con placeholder de ejemplo -->
                <input type="text" id="username" name="username" required 
                       placeholder="Ej: juanperez">
            </div>
            
            <div class="form-group">
                <label for="email">Email:</label>
                <!-- Campo de email con validaci√≥n HTML5 (type="email") -->
                <input type="email" id="email" name="email" required 
                       placeholder="Ej: juan@correo.com">
            </div>
            
            <div class="form-group">
                <label for="password">Contrase√±a:</label>
                <!-- Campo de contrase√±a con indicaci√≥n de longitud m√≠nima -->
                <input type="password" id="password" name="password" required 
                       placeholder="M√≠nimo 6 caracteres">
            </div>
            
            <div class="form-group">
                <label for="confirmPassword">Confirmar Contrase√±a:</label>
                <!-- Campo para verificar que la contrase√±a se escribi√≥ correctamente -->
                <input type="password" id="confirmPassword" name="confirmPassword" required 
                       placeholder="Repite la contrase√±a">
            </div>
            
            <!-- ===== BOTONES DE ACCI√ìN ===== -->
            <div class="form-actions">
                <!-- Bot√≥n para enviar el formulario y crear el usuario -->
                <button type="submit" class="btn-login">‚úÖ Registrar Usuario</button>
                <!-- Enlace para volver al login sin registrar -->
                <a href="/login" class="btn-cancel">‚ùå Cancelar</a>
            </div>
        </form>
    </div>

    <!-- ===== VALIDACI√ìN EN EL FRONTEND ===== -->
    <script>
        // Validaci√≥n de contrase√±as coincidentes antes de enviar el formulario
        document.querySelector('form').addEventListener('submit', function(e) {
            // Obtenemos los valores de los campos de contrase√±a
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            // Verificamos que las contrase√±as coincidan
            if (password !== confirmPassword) {
                e.preventDefault(); // Detenemos el env√≠o del formulario
                alert('‚ùå Las contrase√±as no coinciden. Por favor, verifica.');
                return false; // Salimos de la funci√≥n
            }
            
            // Verificamos que la contrase√±a tenga al menos 6 caracteres
            if (password.length < 6) {
                e.preventDefault(); // Detenemos el env√≠o del formulario
                alert('‚ùå La contrase√±a debe tener al menos 6 caracteres.');
                return false; // Salimos de la funci√≥n
            }
            
            // Si pasa todas las validaciones, el formulario se env√≠a normalmente
        });
    </script>
</body>
</html>